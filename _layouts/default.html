<html>

{% include info.html %}

<body>
  <div class="content">
    <div class="tapePlayer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 1100">
        <defs>
          <style>
            .cls-1, .cls-2, .cls-3 {
              fill: none;
              stroke: #000;
              stroke-width: 4px;
            }

            .cls-1 {
              stroke-linecap: round;
            }

            .cls-1, .cls-3 {
              stroke-linejoin: round;
            }

            .cls-2 {
              stroke-miterlimit: 10;
            }

            .cls-4 {
              font-size: 56.675px;
            }

            .cls-4, .cls-5 {
              font-family: BradleyHandITCTT-Bold, Bradley Hand, sans-serif;
              font-weight: 700;
            }

            .cls-5 {
              font-size: 37.088px;
            }
          </style>
        </defs>
        <title>player</title>
        <g id="Base">
          <g id="Player">
            <path d="M18.116,507.148a12.658,12.658,0,0,1,5.031,1.248,7,7,0,0,0,2.844.6H1074.009c12.462,0,16.425,2.168,17.679,3.461,1.572,1.621,1.581,5.146,1.408,10.759-.047,1.528-.1,3.109-.1,4.771v546.018c0,7.482-.3,10.313-3.6,12.707-5.762,4.17-19.69,6.284-41.4,6.284H25.991c-6.167,0-11.492,0-14.4-2.008C8.545,1088.887,7,1083.174,7,1074.009V527.991c0-8.738,3.863-20.843,11.116-20.843m0-7C5.647,500.148,0,515.934,0,527.991v546.018C0,1100,11.637,1100,25.991,1100H1048c52,0,52-11.637,52-25.991V527.991c0-14.354,4-25.991-25.991-25.991H25.991a19.407,19.407,0,0,0-7.875-1.852Z"/>
            <path class="cls-1" d="M46,557c6.4-12,31-13,31-13H676s22,5,32,17,5,50,5,50V948s-1,21-7,27-38,8-38,8H72s-21.483-3.425-28-12c-19-25-10-64-10-64V588A154.466,154.466,0,0,1,46,557Z"/>
            <path class="cls-1" d="M162,681s-5,128-1,148,3,31,3,31,398,2,412-2a34.3,34.3,0,0,0,20-16s-3-135-4-155-122-8-189-10S184,681,162,681Z"/>
            <path d="M1019.2,551a14.816,14.816,0,0,1,14.8,14.8V713.2a14.816,14.816,0,0,1-14.8,14.8H780.8A14.816,14.816,0,0,1,766,713.2V565.8A14.816,14.816,0,0,1,780.8,551h238.4m0-7H780.8A21.8,21.8,0,0,0,759,565.8V713.2A21.8,21.8,0,0,0,780.8,735h238.4a21.8,21.8,0,0,0,21.8-21.8V565.8a21.8,21.8,0,0,0-21.8-21.8Z"/>
            <path d="M844.074,938.061a59.005,59.005,0,0,1,47.425,94.027,59.28,59.28,0,0,1-47.533,23.981,59,59,0,0,1-47.428-94.027,59.287,59.287,0,0,1,47.535-23.981h0m0-7a66.005,66.005,0,1,0,39.125,12.89,65.914,65.914,0,0,0-39.125-12.89Z"/>
            <path class="cls-1" d="M945,839h96"/>
            <line class="cls-1" x1="945" y1="995" x2="1052" y2="995"/>
            <polyline class="cls-1" points="796.182 1042.549 792.968 1066.274 814.686 1056.199"/>
            <line class="cls-1" x1="818.494" y1="1031.67" x2="835.708" y2="1008.332"/>
            <path d="M849.121,780.165a58.349,58.349,0,0,1,26.718,6.439,59.01,59.01,0,0,1-26.828,111.589,59.014,59.014,0,0,1,.108-118.028h0m0-7a66.024,66.024,0,1,0,29.9,7.2,66,66,0,0,0-29.9-7.2Z"/>
            <polyline class="cls-1" points="796.36 799.436 772.43 800.151 785.926 819.926"/>
            <line class="cls-1" x1="810.747" y1="819.665" x2="836.589" y2="832.826"/>
            <path class="cls-1" d="M188.4,983S233,947,238,945s281-6,287-5,50.53,43,50.53,43"/>
            <rect class="cls-2" x="53" y="1020" width="148" height="46" rx="12" ry="12"/>
            <rect class="cls-2" x="218.667" y="1020" width="148" height="46" rx="12" ry="12"/>
            <rect class="cls-2" x="384.333" y="1020" width="148" height="46" rx="12" ry="12"/>
            <rect class="cls-2" x="550" y="1020" width="148" height="46" rx="12" ry="12"/>
            <path class="cls-1" d="M434,502c-12.507-20.852-45-42-75-39s-49,15-66.333,39"/>
            <polyline class="cls-1" points="310.36 482.357 203 290 217 280 340.443 466.394"/>
            <polyline class="cls-1" points="397.441 470.658 513 342 529 356 416.157 482.357"/>
            <polyline class="cls-1" points="205.485 288.225 86 82 95 76 213.806 282.282"/>
            <polyline class="cls-1" points="516.395 344.97 695 137 703 143 525.895 353.283"/>
            <path d="M985.2,577a14.816,14.816,0,0,1,14.8,14.8v95.4A14.816,14.816,0,0,1,985.2,702H814.8A14.816,14.816,0,0,1,800,687.2V591.8A14.816,14.816,0,0,1,814.8,577H985.2m0-7H814.8A21.8,21.8,0,0,0,793,591.8v95.4A21.8,21.8,0,0,0,814.8,709H985.2a21.8,21.8,0,0,0,21.8-21.8V591.8A21.8,21.8,0,0,0,985.2,570Z"/>
            <path class="cls-1" d="M824,602c14-6,141,4,153,0"/>
            <path class="cls-1" d="M824,629c10,3,28,3,43,0s101-5,110,0"/>
            <path d="M824,645c-2,2-5,40,0,41s154,5,157-4,0-35-4-37S824,645,824,645Z"/>
            <path class="cls-3" d="M86.049,597c13.451,6.5-13.549,12.5,0,11,2.416-.268,5.451,8.5-19.45,23,23.9-2.5,20.195,13.5,12.9,14.5s30,6,7.765,15.5c-8.991,3.841,516.638-11,557.969-6s40.116-19,25.528-19c21.738-9.5,13.738-9.5-8.509-20,8.509,0,8.509-11,8.509-11s-3.646-3-10.94-8S671.5,582.5,671.5,582.5,131.027,592,86.049,597Z"/>
            <path class="cls-3" d="M558.5,925.5c-10.606-5.065-.1-8.065-10.754-6.836-1.9.219-4.784,5.333,14.754-6.164-18.795,2.053-15.471-22.55-9.737-23.363s-23.623-4.612-6.164-12.166c7.059-3.054-277.42.512-309.955-3.273s-20.621,15.854-9.144,15.8c-17.068,7.552-37.54,10.819-20,19-6.695.031,14-3,14-3s-1.88,9.974,3.876,13.881-9.136,11.45-9.136,11.45S523.132,929.6,558.5,925.5Z"/>
          </g>
        </g>
        <g id="Titles">
          <text class="cls-4 title" transform="translate(379.752 637.945) rotate(-1.704)" text-anchor="middle">{{ page.title }}</text>
          <text class="cls-5 artist" transform="matrix(1, -0.008, 0.008, 1, 383.52, 913.033)" text-anchor="middle">by {{ page.author }}</text>
        </g>
        <g id="Casette">
          <path id="Wheel1" d="M243,729.139a45,45,0,1,0,45,45A45.05,45.05,0,0,0,243,729.139Zm31.291,18.549-10.666,9.024a26.868,26.868,0,0,1,6.1,13.554l13.85-1.984A41,41,0,0,1,284,774H270v.139a26.921,26.921,0,0,1-4.09,14.3l11.848,7.411a41.183,41.183,0,0,1-3.36,4.621l-10.705-8.984a26.975,26.975,0,0,1-12.326,8.336l4.327,13.3a40.675,40.675,0,0,1-5.55,1.385l-2.422-13.774a27.363,27.363,0,0,1-4.722.41,26.871,26.871,0,0,1-10.086-1.945l-5.226,12.967a40.793,40.793,0,0,1-5.14-2.511l6.984-12.1a27.1,27.1,0,0,1-10.361-10.7l-12.33,6.594a40.918,40.918,0,0,1-2.345-5.212l13.139-4.81a27.222,27.222,0,0,1-1.062-14.848l-13.7-2.866a40.7,40.7,0,0,1,1.567-5.508l13.157,4.758a27.015,27.015,0,0,1,8.727-12.057l-8.635-10.982a41,41,0,0,1,4.719-3.212l7.031,12.077a27.219,27.219,0,0,1,14.417-3.631l.449-13.98a41.1,41.1,0,0,1,5.677.574l-2.37,13.784A26.888,26.888,0,0,1,261,754.01l9.318-10.416A41.449,41.449,0,0,1,274.291,747.688Z"/>
          <path id="Wheel2" d="M513,727.139a45,45,0,1,0,45,45A45.05,45.05,0,0,0,513,727.139Zm31.291,18.549-10.666,9.024a26.868,26.868,0,0,1,6.1,13.554l13.85-1.984A41,41,0,0,1,554,772H540v.139a26.921,26.921,0,0,1-4.09,14.3l11.848,7.411a41.183,41.183,0,0,1-3.36,4.621l-10.705-8.984a26.975,26.975,0,0,1-12.326,8.336l4.327,13.3a40.675,40.675,0,0,1-5.55,1.385l-2.422-13.774a27.363,27.363,0,0,1-4.722.41,26.871,26.871,0,0,1-10.086-1.945l-5.226,12.967a40.793,40.793,0,0,1-5.14-2.511l6.984-12.1a27.1,27.1,0,0,1-10.361-10.7l-12.33,6.594a40.918,40.918,0,0,1-2.345-5.212l13.139-4.81a27.222,27.222,0,0,1-1.062-14.848l-13.7-2.866a40.7,40.7,0,0,1,1.567-5.508l13.157,4.758a27.015,27.015,0,0,1,8.727-12.057l-8.635-10.982a41,41,0,0,1,4.719-3.212l7.031,12.077a27.219,27.219,0,0,1,14.417-3.631l.449-13.98a41.1,41.1,0,0,1,5.677.574l-2.37,13.784A26.888,26.888,0,0,1,531,752.01l9.318-10.416A41.449,41.449,0,0,1,544.291,745.688Z"/>
          <rect id="Center" x="309" y="733" width="136" height="80" rx="12" ry="12"/>
        </g>
      </svg>
    </div>
    <div class="tapeRack">
      {% assign sortedSongs = site.songs | sort:"position" %}
      {% for song in sortedSongs %}
      {% if song.mixtape == page.mixtape %}
      <div class="tape {{ song.identifier }}">
        <img src="{{ site.baseurl }}{{ song.image }}" />
        <audio id="{{ song.identifier }}" onended="nextSong()">
          <source src="{{ site.baseurl }}{{ song.file }}" type="audio/mpeg">
        </audio>
      </div>
      <script>
        $(document).ready(function() {
          var songTitle = '{{ song.title }}';
          var songArtist = '{{ song.artist }}'
          $('.{{ song.identifier }}').click(function() {
            songControls($(this), songTitle, songArtist)
          });
        });
      </script>
      {% endif %}
      {% endfor %}
    </div>
  </div>

  <script>
    var allTracks = $('body').find('audio');
    var allTapes = $('.tape');
    var currentTrack;

    var songControls = function(obj, title, artist) {
      if ($(obj).find('audio')[0].paused == true) {
        for (i = 0; i < allTracks.length; i++) {
          allTracks[i].pause();
          allTracks[i].load();
        };
        $('.tape').css('background-color', 'inherit')
        $(obj).css('background-color', 'rgb(249, 62, 62)');
        $(obj).find('audio')[0].play();

        $('.title').text(title);
        $('.artist').text(artist);

        $('#Wheel1').addClass('rotation');
        $('#Wheel2').addClass('rotation');

        currentTrack = $(obj).find('audio')[0];

        return currentTrack;
      } else {
        $(obj).css('background-color', 'inherit');
        $(obj).find('audio')[0].pause()
        $(obj).find('audio')[0].load();;

        $('#Wheel1').removeClass('rotation');
        $('#Wheel2').removeClass('rotation');
      };
    };

    var nextSong = function() {
      for (i = 0; i < allTracks.length; i++) {
        if (allTracks[i] == currentTrack) {
          $(allTracks[i + 1]).parent().trigger('click');
        }
      };
    };

    var randomShift = function() {
      for (i = 0; i < allTapes.length; i++) {
        $(allTapes[i]).css('left', function() {
          var n = 50 + (Math.round((Math.random() - Math.random()) * 10));
          return n + '%';
        })
      }
    };

    $(document).ready(function() {
      randomShift();
    });
  </script>
</body>

</html>
